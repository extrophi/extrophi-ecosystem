<!-- Source: https://docs.astro.build/en/guides/server-side-rendering/ -->

[Skip to content](#_top)

Search

[GitHub](https://github.com/withastro/astro)[Discord](https://astro.build/chat)

Select theme

DarkLightAuto

Select language

EnglishDeutschPortuguês do BrasilEspañol简体中文正體中文Françaisहिन्दीالعربية日本語한국어PolskiРусскийItaliano

* [Start](#__tab-start)
* [Guides and recipes](#__tab-guides-and-recipes)
* [Reference](#__tab-reference)
* [Integrations](#__tab-integrations)
* [Third-party services](#__tab-third-party-services)

* [Getting started](/en/getting-started/)
* Welcome, world!

  + [Why Astro?](/en/concepts/why-astro/)
  + [Islands architecture](/en/concepts/islands/)
  + [Tutorial: Build a blog](/en/tutorial/0-introduction/)
  + [Courses](/en/astro-courses/)
* Start a new project

  + [Installation](/en/install-and-setup/)
  + [Project structure](/en/basics/project-structure/)
  + [Develop and build](/en/develop-and-build/)
* Configuration

  + [Configuration overview](/en/guides/configuring-astro/)
  + [Editor setup](/en/editor-setup/)
  + [TypeScript](/en/guides/typescript/)
  + [Environment variables](/en/guides/environment-variables/)
  + [Build with AI](/en/guides/build-with-ai/)
  + [Dev toolbar](/en/guides/dev-toolbar/)
* Migrate to Astro

  + [Site migration overview](/en/guides/migrate-to-astro/)
  + [Create React App](/en/guides/migrate-to-astro/from-create-react-app/)
  + [Docusaurus](/en/guides/migrate-to-astro/from-docusaurus/)
  + [Eleventy](/en/guides/migrate-to-astro/from-eleventy/)
  + [Gatsby](/en/guides/migrate-to-astro/from-gatsby/)
  + [GitBook](/en/guides/migrate-to-astro/from-gitbook/)
  + [Gridsome](/en/guides/migrate-to-astro/from-gridsome/)
  + [Hugo](/en/guides/migrate-to-astro/from-hugo/)
  + [Jekyll](/en/guides/migrate-to-astro/from-jekyll/)
  + [Next.js](/en/guides/migrate-to-astro/from-nextjs/)
  + [NuxtJS](/en/guides/migrate-to-astro/from-nuxtjs/)
  + [Pelican](/en/guides/migrate-to-astro/from-pelican/)
  + [SvelteKit](/en/guides/migrate-to-astro/from-sveltekit/)
  + [VuePress](/en/guides/migrate-to-astro/from-vuepress/)
  + [WordPress](/en/guides/migrate-to-astro/from-wordpress/)

* Routing and navigation

  + [Pages](/en/basics/astro-pages/)
  + [Routing](/en/guides/routing/)
  + [Endpoints](/en/guides/endpoints/)
  + [Middleware](/en/guides/middleware/)
  + [Internationalization (i18n)](/en/guides/internationalization/)
  + [Prefetch](/en/guides/prefetch/)
  + [View transitions](/en/guides/view-transitions/)
* Build your UI

  + [Components](/en/basics/astro-components/)
  + [Layouts](/en/basics/layouts/)
  + [Styles and CSS](/en/guides/styling/)
  + [Fonts](/en/guides/fonts/)
  + [Syntax Highlighting](/en/guides/syntax-highlighting/)
  + [Scripts and event handling](/en/guides/client-side-scripts/)
  + [Front-end frameworks](/en/guides/framework-components/)
* Add content to your site

  + [Markdown](/en/guides/markdown-content/)
  + [Content collections](/en/guides/content-collections/)
  + [Images](/en/guides/images/)
  + [Data fetching](/en/guides/data-fetching/)
  + [Astro DB](/en/guides/astro-db/)
* Server rendering

  + [On-demand rendering](/en/guides/on-demand-rendering/)
  + [Server islands](/en/guides/server-islands/)
  + [Actions](/en/guides/actions/)
  + [Sessions](/en/guides/sessions/)
* Upgrade

  + [Upgrade Astro](/en/upgrade-astro/)
  + Major upgrade guides

    - [v5.0](/en/guides/upgrade-to/v5/)
    - [v4.0](/en/guides/upgrade-to/v4/)
    - [v3.0](/en/guides/upgrade-to/v3/)
    - [v2.0](/en/guides/upgrade-to/v2/)
    - [v1.0](/en/guides/upgrade-to/v1/)
* [Troubleshooting](/en/guides/troubleshooting/)
* How-to recipes

  + [Recipes overview](/en/recipes/)
  + [Installing a Vite or Rollup plugin](/en/recipes/add-yaml-support/)
  + [Analyze bundle size](/en/recipes/analyze-bundle-size/)
  + [Build a custom image component](/en/recipes/build-custom-img-component/)
  + [Build HTML forms in Astro pages](/en/recipes/build-forms/)
  + [Build forms with API routes](/en/recipes/build-forms-api/)
  + [Use Bun with Astro](/en/recipes/bun/)
  + [Call endpoints from the server](/en/recipes/call-endpoints/)
  + [Verify a Captcha](/en/recipes/captcha/)
  + [Customize file names in the build output](/en/recipes/customizing-output-filenames/)
  + [Build your Astro site with Docker](/en/recipes/docker/)
  + [Dynamically import images](/en/recipes/dynamically-importing-images/)
  + [Add icons to external links](/en/recipes/external-links/)
  + [Add i18n features](/en/recipes/i18n/)
  + [Create a dev toolbar app](/en/recipes/making-toolbar-apps/)
  + [Add last modified time](/en/recipes/modified-time/)
  + [Add reading time](/en/recipes/reading-time/)
  + [Add an RSS feed](/en/recipes/rss/)
  + [Share state between Astro components](/en/recipes/sharing-state/)
  + [Share state between islands](/en/recipes/sharing-state-islands/)
  + [Using streaming to improve page performance](/en/recipes/streaming-improve-page-performance/)
  + [Style rendered Markdown with Tailwind Typography](/en/recipes/tailwind-rendered-markdown/)
* [Contribute to Astro](/en/contribute/)

* Astro Template Syntax

  + [Template expressions reference](/en/reference/astro-syntax/)
  + [Template directives reference](/en/reference/directives-reference/)
* [Configuration Reference](/en/reference/configuration-reference/)
* [CLI Commands](/en/reference/cli-reference/)
* [Imports reference](/en/guides/imports/)
* [Routing Reference](/en/reference/routing-reference/)
* Runtime API

  + [Render context](/en/reference/api-reference/)
  + [astro:actions](/en/reference/modules/astro-actions/)
  + [astro:assets](/en/reference/modules/astro-assets/)
  + [astro:config](/en/reference/modules/astro-config/)
  + [astro:content](/en/reference/modules/astro-content/)
  + [astro:env](/en/reference/modules/astro-env/)
  + [astro:i18n](/en/reference/modules/astro-i18n/)
  + [astro:middleware](/en/reference/modules/astro-middleware/)
  + [astro:transitions](/en/reference/modules/astro-transitions/)
* Other development APIs

  + [Integration API](/en/reference/integrations-reference/)
  + [Adapter API](/en/reference/adapter-reference/)
  + [Content Loader API](/en/reference/content-loader-reference/)
  + [Image Service API](/en/reference/image-service-reference/)
  + [Dev Toolbar App API](/en/reference/dev-toolbar-app-reference/)
  + [Container API (experimental)](/en/reference/container-reference/)
  + [Programmatic Astro API (experimental)](/en/reference/programmatic-reference/)
* Experimental features

  + [Configuring experimental flags](/en/reference/experimental-flags/)
  + [Content Security Policy](/en/reference/experimental-flags/csp/)
  + [Fonts](/en/reference/experimental-flags/fonts/)
  + [Live content collections](/en/reference/experimental-flags/live-content-collections/)
  + [Client prerendering](/en/reference/experimental-flags/client-prerender/)
  + [Intellisense for collections](/en/reference/experimental-flags/content-intellisense/)
  + [Preserve scripts order](/en/reference/experimental-flags/preserve-scripts-order/)
  + [Markdown heading ID compatibility](/en/reference/experimental-flags/heading-id-compat/)
  + [Private meta environment variables inlining](/en/reference/experimental-flags/static-import-meta-env/)
  + [Chrome DevTools workspace](/en/reference/experimental-flags/chrome-devtools-workspace/)
  + [Prerender conflict error](/en/reference/experimental-flags/fail-on-prerender-conflict/)
* [Legacy flags](/en/reference/legacy-flags/)
* [Error reference](/en/reference/error-reference/)

* [Integrations overview](/en/guides/integrations-guide/)
* UI frameworks

  + [Alpine.js](/en/guides/integrations-guide/alpinejs/)
  + [Preact](/en/guides/integrations-guide/preact/)
  + [React](/en/guides/integrations-guide/react/)
  + [SolidJS](/en/guides/integrations-guide/solid-js/)
  + [Svelte](/en/guides/integrations-guide/svelte/)
  + [Vue](/en/guides/integrations-guide/vue/)
* Adapters

  + [Cloudflare](/en/guides/integrations-guide/cloudflare/)
  + [Netlify](/en/guides/integrations-guide/netlify/)
  + [Node](/en/guides/integrations-guide/node/)
  + [Vercel](/en/guides/integrations-guide/vercel/)
* Other official integrations

  + [DB](/en/guides/integrations-guide/db/)
  + [Markdoc](/en/guides/integrations-guide/markdoc/)
  + [MDX](/en/guides/integrations-guide/mdx/)
  + [Partytown](/en/guides/integrations-guide/partytown/)
  + [Sitemap](/en/guides/integrations-guide/sitemap/)
* [Publish to npm](/en/reference/publish-to-npm/)

* Deployment guides

  + [Deployment overview](/en/guides/deploy/)
  + [AWS](/en/guides/deploy/aws/)
  + [Azion](/en/guides/deploy/azion/)
  + [Buddy](/en/guides/deploy/buddy/)
  + [Cleavr](/en/guides/deploy/cleavr/)
  + [Clever Cloud](/en/guides/deploy/clever-cloud/)
  + [Cloudflare](/en/guides/deploy/cloudflare/)
  + [CloudRay](/en/guides/deploy/cloudray/)
  + [Deno](/en/guides/deploy/deno/)
  + [DeployHQ](/en/guides/deploy/deployhq/)
  + [Fleek](/en/guides/deploy/fleek/)
  + [Flightcontrol](/en/guides/deploy/flightcontrol/)
  + [Fly.io](/en/guides/deploy/flyio/)
  + [GitHub Pages](/en/guides/deploy/github/)
  + [GitLab Pages](/en/guides/deploy/gitlab/)
  + [Google Cloud](/en/guides/deploy/google-cloud/)
  + [Google Firebase](/en/guides/deploy/google-firebase/)
  + [Heroku](/en/guides/deploy/heroku/)
  + [Juno](/en/guides/deploy/juno/)
  + [Kinsta](/en/guides/deploy/kinsta/)
  + [Microsoft Azure](/en/guides/deploy/microsoft-azure/)
  + [Netlify](/en/guides/deploy/netlify/)
  + [Railway](/en/guides/deploy/railway/)
  + [Render](/en/guides/deploy/render/)
  + [Seenode](/en/guides/deploy/seenode/)
  + [SST](/en/guides/deploy/sst/)
  + [Stormkit](/en/guides/deploy/stormkit/)
  + [Surge](/en/guides/deploy/surge/)
  + [Vercel](/en/guides/deploy/vercel/)
  + [Zeabur](/en/guides/deploy/zeabur/)
  + [Zephyr Cloud](/en/guides/deploy/zephyr/)
  + [Zerops](/en/guides/deploy/zerops/)
* Content management systems

  + [CMS overview](/en/guides/cms/)
  + [ApostropheCMS](/en/guides/cms/apostrophecms/)
  + [Builder.io](/en/guides/cms/builderio/)
  + [ButterCMS](/en/guides/cms/buttercms/)
  + [Caisy](/en/guides/cms/caisy/)
  + [CloudCannon](/en/guides/cms/cloudcannon/)
  + [Contentful](/en/guides/cms/contentful/)
  + [Cosmic](/en/guides/cms/cosmic/)
  + [Craft CMS](/en/guides/cms/craft-cms/)
  + [Craft Cross CMS](/en/guides/cms/craft-cross-cms/)
  + [Crystallize](/en/guides/cms/crystallize/)
  + [DatoCMS](/en/guides/cms/datocms/)
  + [Decap CMS](/en/guides/cms/decap-cms/)
  + [Directus](/en/guides/cms/directus/)
  + [Drupal](/en/guides/cms/drupal/)
  + [Flotiq](/en/guides/cms/flotiq/)
  + [Front Matter CMS](/en/guides/cms/frontmatter-cms/)
  + [Ghost](/en/guides/cms/ghost/)
  + [GitCMS](/en/guides/cms/gitcms/)
  + [Hashnode](/en/guides/cms/hashnode/)
  + [Hygraph](/en/guides/cms/hygraph/)
  + [JekyllPad](/en/guides/cms/jekyllpad/)
  + [Keystatic](/en/guides/cms/keystatic/)
  + [KeystoneJS](/en/guides/cms/keystonejs/)
  + [Kontent.ai](/en/guides/cms/kontent-ai/)
  + [microCMS](/en/guides/cms/microcms/)
  + [Optimizely CMS](/en/guides/cms/optimizely/)
  + [Payload CMS](/en/guides/cms/payload/)
  + [Prepr CMS](/en/guides/cms/preprcms/)
  + [Prismic](/en/guides/cms/prismic/)
  + [Sanity](/en/guides/cms/sanity/)
  + [Sitecore XM](/en/guides/cms/sitecore/)
  + [Sitepins](/en/guides/cms/sitepins/)
  + [Spinal](/en/guides/cms/spinal/)
  + [Statamic](/en/guides/cms/statamic/)
  + [Storyblok](/en/guides/cms/storyblok/)
  + [Strapi](/en/guides/cms/strapi/)
  + [StudioCMS](/en/guides/cms/studiocms/)
  + [Tina CMS](/en/guides/cms/tina-cms/)
  + [Umbraco](/en/guides/cms/umbraco/)
  + [Wordpress](/en/guides/cms/wordpress/)
* Backend services

  + [Backend services overview](/en/guides/backend/)
  + [Appwrite](/en/guides/backend/appwriteio/)
  + [Firebase](/en/guides/backend/google-firebase/)
  + [Neon](/en/guides/backend/neon/)
  + [Prisma Postgres](/en/guides/backend/prisma-postgres/)
  + [Sentry](/en/guides/backend/sentry/)
  + [Supabase](/en/guides/backend/supabase/)
  + [Turso](/en/guides/backend/turso/)
  + [Xata](/en/guides/backend/xata/)
* Image and video hosting

  + [Media hosting overview](/en/guides/media/)
  + [Cloudinary](/en/guides/media/cloudinary/)
  + [Mux](/en/guides/media/mux/)
* [E-commerce](/en/guides/ecommerce/)
* [Authentication](/en/guides/authentication/)
* [Testing](/en/guides/testing/)

## Sponsored by

[GitHub](https://github.com/withastro/astro)[Discord](https://astro.build/chat)

Select theme

DarkLightAuto

Select language

EnglishDeutschPortuguês do BrasilEspañol简体中文正體中文Françaisहिन्दीالعربية日本語한국어PolskiРусскийItaliano

## Sponsored by

On this page

* [Overview](#_top)
* [Server adapters](#server-adapters)
  + [Add an Adapter](#add-an-adapter)
* [Enabling on-demand rendering](#enabling-on-demand-rendering)
  + ['server' mode](#server-mode)
* [On-demand rendering features](#on-demand-rendering-features)
  + [HTML streaming](#html-streaming)
  + [Cookies](#cookies)
  + [Response](#response)
  + [Request](#request)
  + [Server Endpoints](#server-endpoints)

## On this page

* [Overview](#_top)
* [Server adapters](#server-adapters)
  + [Add an Adapter](#add-an-adapter)
* [Enabling on-demand rendering](#enabling-on-demand-rendering)
  + ['server' mode](#server-mode)
* [On-demand rendering features](#on-demand-rendering-features)
  + [HTML streaming](#html-streaming)
  + [Cookies](#cookies)
  + [Response](#response)
  + [Request](#request)
  + [Server Endpoints](#server-endpoints)

![](/_astro/CodingInPublic.DpaYu7Qd_5sx41.webp)

## Learn Astro with **Coding in Public**

150+ video lessons
•
Astro v5 ready

[Get 33% off](https://learnastro.dev?code=ASTRO_HOLIDAY_PROMO)

# On-demand rendering

Your Astro project code must be **rendered** to HTML in order to be displayed on the web.

By default, Astro pages, routes, and API endpoints will be pre-rendered at build time as static pages. However, you can choose to render some or all of your routes on demand by a server when a route is requested.

On-demand rendered pages and routes are generated per visit, and can be customized for each viewer. For example, a page rendered on demand can show a logged-in user their account information or display freshly updated data without requiring a full-site rebuild.

On-demand rendering on the server at request time is also known as **server-side rendering (SSR)**.

## Server adapters

[Section titled “Server adapters”](#server-adapters)

To render any page on demand, you need to add an **adapter**. Each adapter allows Astro to output a script that runs your project on a specific **runtime**: the environment that runs code on the server to generate pages when they are requested (e.g. Netlify, Cloudflare).

You may also wish to add an adapter even if your site is entirely static and you are not rendering any pages on demand. For example, the [Netlify adapter](/en/guides/integrations-guide/netlify/) enables Netlify’s Image CDN, and [server islands](/en/guides/server-islands/) require an adapter installed to use `server:defer` on a component.

### Adapters

* ![](/logos/cloudflare-pages.svg)

  ### [@astrojs/cloudflare](/en/guides/integrations-guide/cloudflare/)
* ![](/logos/netlify.svg)

  ### [@astrojs/netlify](/en/guides/integrations-guide/netlify/)
* ![](/logos/node.svg)

  ### [@astrojs/node](/en/guides/integrations-guide/node/)
* ![](/logos/vercel.svg)

  ### [@astrojs/vercel](/en/guides/integrations-guide/vercel/)

Astro maintains official adapters for [Node.js](https://nodejs.org/), [Netlify](https://www.netlify.com/), [Vercel](https://vercel.com/), and [Cloudflare](https://www.cloudflare.com/). You can find both [official and community adapters in our integrations directory](https://astro.build/integrations/?search=&categories%5B%5D=adapters). Choose the one that corresponds to your [deployment environment](/en/guides/deploy/).

### Add an Adapter

[Section titled “Add an Adapter”](#add-an-adapter)

You can add any of the [official adapter integrations maintained by Astro](/en/guides/integrations-guide/#official-integrations) with the following `astro add` command. This will install the adapter and make the appropriate changes to your `astro.config.mjs` file in one step.

For example, to install the Netlify adapter, run:

* [npm](#tab-panel-1804)
* [pnpm](#tab-panel-1805)
* [Yarn](#tab-panel-1806)

Terminal window

```
npx astro add netlify
```

Terminal window

```
pnpm astro add netlify
```

Terminal window

```
yarn astro add netlify
```

You can also [add an adapter manually by installing the NPM package](/en/guides/integrations-guide/#installing-an-npm-package) (e.g. `@astrojs/netlify`) and updating `astro.config.mjs` yourself.

Note that different adapters may have different configuration settings. Read each adapter’s documentation, and apply any necessary config options to your chosen adapter in `astro.config.mjs`

## Enabling on-demand rendering

[Section titled “Enabling on-demand rendering”](#enabling-on-demand-rendering)

**By default, your entire Astro site will be prerendered**, and static HTML pages will be sent to the browser. However, you may opt out of prerendering on any routes that require server rendering, for example, a page that checks for cookies and displays personalized content.

First, [add an adapter integration](#add-an-adapter) for your server runtime to enable on-demand server rendering in your Astro project.

Then, add `export const prerender = false` at the top of the individual page or endpoint you want to render on demand. The rest of your site will remain a static site:

src/pages/page-rendered-on-demand.astro

```
---

export const prerender = false

---

<html>

<!--

This content will be server-rendered on demand!

Just add an adapter integration for a server runtime!

All other pages are statically-generated at build time!

-->

<html>
```

The following example shows opting out of prerendering in order to display a random number each time the endpoint is hit:

src/pages/randomnumber.js

```
export const prerender = false;

export async function GET() {

let number = Math.random();

return new Response(

JSON.stringify({

number,

message: `Here's a random number: ${number}`,

}),

);

}
```

### `'server'` mode

[Section titled “'server' mode”](#server-mode)

For a **highly dynamic app**, after adding an adapter, you can [set your build output configuration to `output: 'server'`](/en/reference/configuration-reference/#output) to **server-render all your pages by default**. This is the equivalent of opting out of prerendering on every page.

Then, if needed, you can choose to prerender any individual pages that do not require a server to execute, such as a privacy policy or about page.

src/pages/about-my-app.astro

```
---

export const prerender = true

---

<html>

<!--

`output: 'server'` is configured, but this page is static!

The rest of my site is rendered on demand!

-->

<html>
```

Add `export const prerender = true` to any page or route to prerender a static page or endpoint:

src/pages/myendpoint.js

```
export const prerender = true;

export async function GET() {

return new Response(

JSON.stringify({

message: `This is my static endpoint`,

}),

);

}
```

Tip

Start with the default `'static'` mode until you are sure that **most or all** of your pages will be rendered on demand! This ensures that your site is as performant as possible, not relying on a server function to render static content.

The `'server'` output mode does not bring any additional functionality. It only switches the default rendering behavior.

See more about the [`output` setting](/en/reference/configuration-reference/#output) in the configuration reference.

## On-demand rendering features

[Section titled “On-demand rendering features”](#on-demand-rendering-features)

### HTML streaming

[Section titled “HTML streaming”](#html-streaming)

With HTML streaming, a document is broken up into chunks, sent over the network in order, and rendered on the page in that order. Astro uses HTML streaming in on-demand rendering to send each component to the browser as it renders them. This makes sure the user sees your HTML as fast as possible, although network conditions can cause large documents to be downloaded slowly, and waiting for data fetches can block page rendering.

![](/houston_chef.webp)
**Related recipe:**
[Using streaming to improve page performance](/en/recipes/streaming-improve-page-performance/)

Caution

Features that modify the [Response headers](https://developer.mozilla.org/en-US/docs/Glossary/Response_header) are only available at the **page level**. (You can’t use them inside of components, including layout components.) By the time Astro runs your component code, it has already sent the Response headers and they cannot be modified.

### Cookies

[Section titled “Cookies”](#cookies)

A page or API endpoint rendered on demand can check, set, get, and delete cookies.

The example below updates the value of a cookie for a page view counter:

src/pages/index.astro

```
---

export const prerender = false; // Not needed in 'server' mode

let counter = 0

if (Astro.cookies.has('counter')) {

const cookie = Astro.cookies.get('counter')

const value = cookie?.number()

if (value !== undefined && !isNaN(value)) counter = value + 1

}

Astro.cookies.set('counter', String(counter))

---

<html>

<h1>Counter = {counter}</h1>

</html>
```

See more details about [`Astro.cookies` and the `AstroCookie` type](/en/reference/api-reference/#cookies) in the API reference.

### `Response`

[Section titled “Response”](#response)

[`Astro.response`](/en/reference/api-reference/#response) is a standard [`ResponseInit`](https://developer.mozilla.org/en-US/docs/Web/API/Response/Response#options) object. It can be used to set the response status and headers.

The example below sets a response status and status text for a product page when the product does not exist:

src/pages/product/[id].astro

```
---

export const prerender = false; // Not needed in 'server' mode

import { getProduct } from '../api';

const product = await getProduct(Astro.params.id);

// No product found

if (!product) {

Astro.response.status = 404;

Astro.response.statusText = 'Not found';

}

---

<html>

<!-- Page here... -->

</html>
```

#### `Astro.response.headers`

[Section titled “Astro.response.headers”](#astroresponseheaders)

You can set headers using the `Astro.response.headers` object:

src/pages/index.astro

```
---

export const prerender = false; // Not needed in 'server' mode

Astro.response.headers.set('Cache-Control', 'public, max-age=3600');

---

<html>

<!-- Page here... -->

</html>
```

#### Return a `Response` object

[Section titled “Return a Response object”](#return-a-response-object)

You can also return a [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response) object directly from any page using on-demand rendering either manually or with [`Astro.redirect`](/en/reference/api-reference/#redirect).

The example below looks up an ID in the database on a dynamic page and either it returns a 404 if the product does not exist, or it redirects the user to another page if the product is no longer available, or it displays the product:

src/pages/product/[id].astro

```
---

export const prerender = false; // Not needed in 'server' mode

import { getProduct } from '../api';

const product = await getProduct(Astro.params.id);

// No product found

if (!product) {

return new Response(null, {

status: 404,

statusText: 'Not found'

});

}

// The product is no longer available

if (!product.isAvailable) {

return Astro.redirect("/products", 301);

}

---

<html>

<!-- Page here... -->

</html>
```

### `Request`

[Section titled “Request”](#request)

`Astro.request` is a standard [Request](https://developer.mozilla.org/en-US/docs/Web/API/Request) object. It can be used to get the `url`, `headers`, `method`, and even the body of the request.

You can access additional information from this object for pages that are not statically generated.

#### `Astro.request.headers`

[Section titled “Astro.request.headers”](#astrorequestheaders)

The headers for the request are available on `Astro.request.headers`. This works like the browser’s [`Request.headers`](https://developer.mozilla.org/en-US/docs/Web/API/Request/headers). It is a [Headers](https://developer.mozilla.org/en-US/docs/Web/API/Headers) object where you can retrieve headers such as the cookie.

src/pages/index.astro

```
---

export const prerender = false; // Not needed in 'server' mode

const cookie = Astro.request.headers.get('cookie');

// ...

---

<html>

<!-- Page here... -->

</html>
```

#### `Astro.request.method`

[Section titled “Astro.request.method”](#astrorequestmethod)

The HTTP method used in the request is available as `Astro.request.method`. This works like the browser’s [`Request.method`](https://developer.mozilla.org/en-US/docs/Web/API/Request/method). It returns the string representation of the HTTP method used in the request.

src/pages/index.astro

```
---

export const prerender = false; // Not needed in 'server' mode

console.log(Astro.request.method) // GET (when navigated to in the browser)

---
```

See more details about [`Astro.request`](/en/reference/api-reference/#request) in the API reference.

### Server Endpoints

[Section titled “Server Endpoints”](#server-endpoints)

A server endpoint, also known as an **API route**, is a special function exported from a `.js` or `.ts` file within the `src/pages/` folder. A powerful feature of server-side rendering on demand, API routes are able to securely execute code on the server.

The function takes an [endpoint context](/en/reference/api-reference/) and returns a [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response).

To learn more, see our [Endpoints Guide](/en/guides/endpoints/#server-endpoints-api-routes).

Learn

![Scrimba](/_astro/Scrimba.ByZ1pAIN_1PqoUV.webp)
![](/_astro/JamesQuick.BYVczE5K_Z27c5s6.webp)

## **Learn Astro** with James Q Quick

Build your first site with 35 interactive Scrimba lessons

[Get 20% off](https://scrimba.com/intro-to-astro-c00ar0fi5u?via=astro)

[Edit page](https://github.com/withastro/docs/edit/main/src/content/docs/en/guides/on-demand-rendering.mdx)
[Translate this page](https://contribute.docs.astro.build/guides/i18n/)

[Previous

Astro DB](/en/guides/astro-db/)
[Next

Server islands](/en/guides/server-islands/)

[Contribute](/en/contribute/)
[Community](https://astro.build/chat)
[Sponsor](https://opencollective.com/astrodotbuild)